{"uid":"2eeac1794b04cec3","name":"test_roles_and_delegations[chromium]","fullName":"tests.console.test_console#test_roles_and_delegations","historyId":"31146a7d98a747169765b7e51f06432d","time":{"start":1740162815332,"stop":1740162822262,"duration":6930},"description":"This test attempts to change Bob Dylan's roles and add a delagation.","descriptionHtml":"<p>This test attempts to change Bob Dylan's roles and add a delagation.</p>\n","status":"failed","statusMessage":"AssertionError: Locator expected to contain text '\"username\":\"bdylan\",\"roles\":[\"ROLE_USER\"]'\nActual value: {\"GeorchestraUser\":{\"username\":\"bdylan\",\"roles\":[\"ROLE_GN_ADMIN\",\"ROLE_USER\",\"ROLE_GN_REVIEWER\"],\"organization\":\"PSC\",\"id\":\"0f17b135-b1b4-48c7-bc87-63c4bff3663a\",\"lastUpdated\":\"1049179d368a234e8b5c333dc017c6d3281d62eafc8d7ec67259388a93930af5\",\"firstName\":\"Bob\",\"lastName\":\"Dylan\",\"email\":\"bob.d@mymail.com\",\"postalAddress\":null,\"telephoneNumber\":null,\"title\":null,\"notes\":null,\"ldapWarn\":false,\"ldapRemainingDays\":null,\"isExternalAuth\":false,\"oauth2Provider\":null,\"oauth2Uid\":null},\"org.georchestra.gateway.security.ldap.extended.GeorchestraUserNamePasswordAuthenticationToken\":{\"configName\":\"default\",\"name\":\"bdylan\",\"details\":null,\"principal\":{\"dn\":\"uid=bdylan,ou=users,dc=georchestra,dc=org\",\"password\":null,\"username\":\"bdylan\",\"authorities\":[{\"authority\":\"ROLE_USER\"},{\"authority\":\"ROLE_GN_ADMIN\"},{\"authority\":\"ROLE_GN_REVIEWER\"}],\"accountNonExpired\":true,\"accountNonLocked\":true,\"credentialsNonExpired\":true,\"enabled\":true,\"timeBeforeExpiration\":2147483647,\"graceLoginsRemaining\":2147483647},\"credentials\":null,\"authorities\":[{\"authority\":\"ROLE_GN_ADMIN\"},{\"authority\":\"ROLE_USER\"},{\"authority\":\"ROLE_GN_REVIEWER\"}],\"authenticated\":true}} \nCall log:\n  - LocatorAssertions.to_contain_text with timeout 5000ms\n  -   - waiting for locator(\"pre\")\n  -     9 × locator resolved to <pre>{\"GeorchestraUser\":{\"username\":\"bdylan\",\"roles\":[…</pre>\n  -       - unexpected value \"{\"GeorchestraUser\":{\"username\":\"bdylan\",\"roles\":[\"ROLE_GN_ADMIN\",\"ROLE_USER\",\"ROLE_GN_REVIEWER\"],\"organization\":\"PSC\",\"id\":\"0f17b135-b1b4-48c7-bc87-63c4bff3663a\",\"lastUpdated\":\"1049179d368a234e8b5c333dc017c6d3281d62eafc8d7ec67259388a93930af5\",\"firstName\":\"Bob\",\"lastName\":\"Dylan\",\"email\":\"bob.d@mymail.com\",\"postalAddress\":null,\"telephoneNumber\":null,\"title\":null,\"notes\":null,\"ldapWarn\":false,\"ldapRemainingDays\":null,\"isExternalAuth\":false,\"oauth2Provider\":null,\"oauth2Uid\":null},\"org.georchestra.gateway.security.ldap.extended.GeorchestraUserNamePasswordAuthenticationToken\":{\"configName\":\"default\",\"name\":\"bdylan\",\"details\":null,\"principal\":{\"dn\":\"uid=bdylan,ou=users,dc=georchestra,dc=org\",\"password\":null,\"username\":\"bdylan\",\"authorities\":[{\"authority\":\"ROLE_USER\"},{\"authority\":\"ROLE_GN_ADMIN\"},{\"authority\":\"ROLE_GN_REVIEWER\"}],\"accountNonExpired\":true,\"accountNonLocked\":true,\"credentialsNonExpired\":true,\"enabled\":true,\"timeBeforeExpiration\":2147483647,\"graceLoginsRemaining\":2147483647},\"credentials\":null,\"authorities\":[{\"authority\":\"ROLE_GN_ADMIN\"},{\"authority\":\"ROLE_USER\"},{\"authority\":\"ROLE_GN_REVIEWER\"}],\"authenticated\":true}}\"","statusTrace":"page = <Page url='https://georchestra-127-0-0-1.nip.io/whoami'>\n\n    @allure.epic(\"Console\")\n    @allure.feature(\"User roles and delegations change\")\n    @allure.story(\"Change bdylan's roles and delegations\")\n    @allure.description(\"This test attempts to change Bob Dylan's roles and add a delagation.\")\n    @pytest.mark.skipif(condition=ConfigurationManager.write_tests_disabled(), reason=\"Write tests are disabled\")\n    def test_roles_and_delegations(page: Page):\n        login(page, username=\"bdylan\", password=\"bdylan123456\")\n        page.goto(\"/whoami\")\n>       expect(page.locator(\"pre\")).to_contain_text(\"\\\"username\\\":\\\"bdylan\\\",\\\"roles\\\":[\\\"ROLE_USER\\\"]\")\nE       AssertionError: Locator expected to contain text '\"username\":\"bdylan\",\"roles\":[\"ROLE_USER\"]'\nE       Actual value: {\"GeorchestraUser\":{\"username\":\"bdylan\",\"roles\":[\"ROLE_GN_ADMIN\",\"ROLE_USER\",\"ROLE_GN_REVIEWER\"],\"organization\":\"PSC\",\"id\":\"0f17b135-b1b4-48c7-bc87-63c4bff3663a\",\"lastUpdated\":\"1049179d368a234e8b5c333dc017c6d3281d62eafc8d7ec67259388a93930af5\",\"firstName\":\"Bob\",\"lastName\":\"Dylan\",\"email\":\"bob.d@mymail.com\",\"postalAddress\":null,\"telephoneNumber\":null,\"title\":null,\"notes\":null,\"ldapWarn\":false,\"ldapRemainingDays\":null,\"isExternalAuth\":false,\"oauth2Provider\":null,\"oauth2Uid\":null},\"org.georchestra.gateway.security.ldap.extended.GeorchestraUserNamePasswordAuthenticationToken\":{\"configName\":\"default\",\"name\":\"bdylan\",\"details\":null,\"principal\":{\"dn\":\"uid=bdylan,ou=users,dc=georchestra,dc=org\",\"password\":null,\"username\":\"bdylan\",\"authorities\":[{\"authority\":\"ROLE_USER\"},{\"authority\":\"ROLE_GN_ADMIN\"},{\"authority\":\"ROLE_GN_REVIEWER\"}],\"accountNonExpired\":true,\"accountNonLocked\":true,\"credentialsNonExpired\":true,\"enabled\":true,\"timeBeforeExpiration\":2147483647,\"graceLoginsRemaining\":2147483647},\"credentials\":null,\"authorities\":[{\"authority\":\"ROLE_GN_ADMIN\"},{\"authority\":\"ROLE_USER\"},{\"authority\":\"ROLE_GN_REVIEWER\"}],\"authenticated\":true}} \nE       Call log:\nE         - LocatorAssertions.to_contain_text with timeout 5000ms\nE         -   - waiting for locator(\"pre\")\nE         -     9 × locator resolved to <pre>{\"GeorchestraUser\":{\"username\":\"bdylan\",\"roles\":[…</pre>\nE         -       - unexpected value \"{\"GeorchestraUser\":{\"username\":\"bdylan\",\"roles\":[\"ROLE_GN_ADMIN\",\"ROLE_USER\",\"ROLE_GN_REVIEWER\"],\"organization\":\"PSC\",\"id\":\"0f17b135-b1b4-48c7-bc87-63c4bff3663a\",\"lastUpdated\":\"1049179d368a234e8b5c333dc017c6d3281d62eafc8d7ec67259388a93930af5\",\"firstName\":\"Bob\",\"lastName\":\"Dylan\",\"email\":\"bob.d@mymail.com\",\"postalAddress\":null,\"telephoneNumber\":null,\"title\":null,\"notes\":null,\"ldapWarn\":false,\"ldapRemainingDays\":null,\"isExternalAuth\":false,\"oauth2Provider\":null,\"oauth2Uid\":null},\"org.georchestra.gateway.security.ldap.extended.GeorchestraUserNamePasswordAuthenticationToken\":{\"configName\":\"default\",\"name\":\"bdylan\",\"details\":null,\"principal\":{\"dn\":\"uid=bdylan,ou=users,dc=georchestra,dc=org\",\"password\":null,\"username\":\"bdylan\",\"authorities\":[{\"authority\":\"ROLE_USER\"},{\"authority\":\"ROLE_GN_ADMIN\"},{\"authority\":\"ROLE_GN_REVIEWER\"}],\"accountNonExpired\":true,\"accountNonLocked\":true,\"credentialsNonExpired\":true,\"enabled\":true,\"timeBeforeExpiration\":2147483647,\"graceLoginsRemaining\":2147483647},\"credentials\":null,\"authorities\":[{\"authority\":\"ROLE_GN_ADMIN\"},{\"authority\":\"ROLE_USER\"},{\"authority\":\"ROLE_GN_REVIEWER\"}],\"authenticated\":true}}\"\n\ntests/console/test_console.py:107: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"pytestconfig","time":{"start":1740162627655,"stop":1740162627656,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"delete_output_dir","time":{"start":1740162627656,"stop":1740162627656,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_verify_url","time":{"start":1740162627656,"stop":1740162627656,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"base_url","time":{"start":1740162627656,"stop":1740162627656,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser_type_launch_args","time":{"start":1740162627656,"stop":1740162627656,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"playwright","time":{"start":1740162627657,"stop":1740162628273,"duration":616},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser_type","time":{"start":1740162628275,"stop":1740162628276,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"launch_browser","time":{"start":1740162628276,"stop":1740162628276,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"connect_options","time":{"start":1740162628276,"stop":1740162628276,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser","time":{"start":1740162628276,"stop":1740162628896,"duration":620},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"device","time":{"start":1740162628896,"stop":1740162628897,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_pw_artifacts_folder","time":{"start":1740162628897,"stop":1740162628897,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser_context_args","time":{"start":1740162628897,"stop":1740162628897,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser_context_args","time":{"start":1740162628897,"stop":1740162628897,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"context","time":{"start":1740162815286,"stop":1740162815298,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"output_path","time":{"start":1740162815286,"stop":1740162815286,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"new_context","time":{"start":1740162815286,"stop":1740162815286,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_artifacts_recorder","time":{"start":1740162815286,"stop":1740162815286,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"page","time":{"start":1740162815298,"stop":1740162815331,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"afterStages":[{"name":"new_context::0","time":{"start":1740162822272,"stop":1740162822417,"duration":145},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_artifacts_recorder::0","time":{"start":1740162822418,"stop":1740162822420,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_pw_artifacts_folder::0","time":{"start":1740162895196,"stop":1740162895197,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser::0","time":{"start":1740162895197,"stop":1740162895316,"duration":119},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"playwright::0","time":{"start":1740162895318,"stop":1740162895336,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"epic","value":"Console"},{"name":"story","value":"Change bdylan's roles and delegations"},{"name":"feature","value":"User roles and delegations change"},{"name":"tag","value":"@pytest.mark.skipif(condition=False, reason='Write tests are disabled')"},{"name":"parentSuite","value":"tests.console"},{"name":"suite","value":"test_console"},{"name":"host","value":"fv-az1279-25"},{"name":"thread","value":"16736-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.console.test_console"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"252ee1856119fa02","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for locator(\"li\").filter(has_text=\"GN_ADMIN\")","time":{"start":1740162777571,"stop":1740162814890,"duration":37319}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":2,"unknown":0,"total":3},"items":[{"uid":"1ef14e82114a313f","reportUrl":"https://georchestra.github.io/e2e-tests/84//#testresult/1ef14e82114a313f","status":"passed","time":{"start":1740159596400,"stop":1740159606207,"duration":9807}},{"uid":"793a7695699f1004","reportUrl":"https://georchestra.github.io/e2e-tests/82//#testresult/793a7695699f1004","status":"passed","time":{"start":1740157834675,"stop":1740157844170,"duration":9495}}]},"tags":["@pytest.mark.skipif(condition=False, reason='Write tests are disabled')"]},"source":"2eeac1794b04cec3.json","parameterValues":["'chromium'"]}