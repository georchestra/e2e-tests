{"uid":"28ff4210853377b0","name":"Test the Datafeeder webapp and links","fullName":"tests.georchestra-base.test_ingest_data#test_import_shp_datafeeder","historyId":"a37b07ec0b274692badb0673e2a84f93","time":{"start":1738663166799,"stop":1738663222616,"duration":55817},"description":"This test attempts to load a SHP file through datafeeder and check links.","descriptionHtml":"<p>This test attempts to load a SHP file through datafeeder and check links.</p>\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 5000ms\n  -   - waiting for locator(\"pre\")","statusTrace":"page = <Page url='https://georchestra-127-0-0-1.nip.io/import/05d768d0-ec11-4c85-9bab-2f1e82a32f84/publishok'>\n\n    @allure.feature(\"geOrchestra\")\n    @allure.story(\"Datafeeder\")\n    @allure.description(\"This test attempts to load a SHP file through datafeeder and check links.\")\n    @allure.title(\"Test the Datafeeder webapp and links\")\n    def test_import_shp_datafeeder(page: Page):\n        login(page)\n        page.goto(\"/import/\")\n        screenshot_page(page, \"datafeeder\")\n        page.locator(\"input#undefined\").first.set_input_files(os.path.abspath(\"./fixtures/antenne.zip\"))\n        page.get_by_role(\"checkbox\").check()\n        page.get_by_role(\"button\", name=\"Upload\").click()\n        page.get_by_role(\"button\", name=\"-\", exact=True).click()\n        page.get_by_role(\"button\", name=\"WGS84\").click()\n        page.get_by_role(\"button\", name=\"WGS84\").click()\n        page.get_by_role(\"button\", name=\"Lambert\").click()\n        page.get_by_role(\"button\", name=\"OK, my data are correct\").click()\n        page.locator(\"input[type=\\\"text\\\"]\").click()\n        page.locator(\"input[type=\\\"text\\\"]\").fill(\"Antennes\")\n        page.locator(\"textarea[name=\\\"textArea\\\"]\").click()\n        page.locator(\"textarea[name=\\\"textArea\\\"]\").fill(\"Awesome\")\n        page.get_by_role(\"button\", name=\"next\").click()\n        page.get_by_role(\"textbox\").fill(\"a\")\n        page.locator(\"#tags div\").nth(1).click()\n        page.get_by_role(\"button\", name=\"Addresses\").click()\n        page.get_by_role(\"button\", name=\"next\").click()\n        page.get_by_role(\"button\", name=\"next\").click()\n        page.get_by_role(\"textbox\").click()\n        page.get_by_role(\"textbox\").fill(\"This is the process\")\n        page.get_by_role(\"button\", name=\"next\").click()\n        page.get_by_role(\"button\", name=\"Submit\").click()\n        screenshot_page(page, \"after-submit-click\")\n        # wait for the data to be ingested\n        page.wait_for_timeout(30000)\n        screenshot_page(page, \"after-ingestion\")\n        expect(page.get_by_role(\"button\", name=\"Metadata record\")).to_be_visible(timeout=15000)\n        expect(page.get_by_role(\"button\", name=\"Map viewer\")).to_be_visible()\n        with page.expect_popup() as page1_info:\n            page.get_by_role(\"button\", name=\"Metadata record\").click()\n        page1 = page1_info.value\n        page.wait_for_timeout(10000)\n        screenshot_page(page1, \"metadata\")\n        expect(page1.get_by_text(\"Awesome\").first).to_be_visible()\n        expect(page1.get_by_text(\"Antennes - WMS\")).to_be_visible()\n        page1.close()\n        with page.expect_popup() as page2_info:\n            page.get_by_role(\"button\", name=\"Map viewer\").click()\n        page2 = page2_info.value\n        screenshot_page(page2, \"mapviewer\")\n        expect(page2.locator(\"canvas\")).to_be_visible()\n        page2.close()\n        with page.expect_popup() as page3_info:\n            page.get_by_role(\"button\", name=\"OGC API\").click()\n        page3 = page3_info.value\n        page3_url = page3_info.value.url\n        screenshot_page(page3, \"ogcapi\")\n>       expect(page3.locator(\"pre\")).to_be_visible()\nE       AssertionError: Locator expected to be visible\nE       Actual value: <element(s) not found> \nE       Call log:\nE         - LocatorAssertions.to_be_visible with timeout 5000ms\nE         -   - waiting for locator(\"pre\")\n\ntests/georchestra-base/test_ingest_data.py:61: AssertionError","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1738662957689,"stop":1738662957689,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"pytestconfig","time":{"start":1738662957689,"stop":1738662957689,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"delete_output_dir","time":{"start":1738662957689,"stop":1738662957689,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_verify_url","time":{"start":1738662957689,"stop":1738662957689,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser_type_launch_args","time":{"start":1738662957690,"stop":1738662957690,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"playwright","time":{"start":1738662957690,"stop":1738662958197,"duration":507},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"launch_browser","time":{"start":1738662958198,"stop":1738662958198,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser_type","time":{"start":1738662958198,"stop":1738662958198,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"connect_options","time":{"start":1738662958198,"stop":1738662958198,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser","time":{"start":1738662958198,"stop":1738662958893,"duration":695},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_pw_artifacts_folder","time":{"start":1738662958894,"stop":1738662958894,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"device","time":{"start":1738662958894,"stop":1738662958894,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser_context_args","time":{"start":1738662958895,"stop":1738662958895,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser_context_args","time":{"start":1738662958895,"stop":1738662958895,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_artifacts_recorder","time":{"start":1738663166748,"stop":1738663166748,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"output_path","time":{"start":1738663166748,"stop":1738663166748,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"new_context","time":{"start":1738663166749,"stop":1738663166749,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"context","time":{"start":1738663166749,"stop":1738663166763,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"page","time":{"start":1738663166763,"stop":1738663166798,"duration":35},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"description":"This test attempts to load a SHP file through datafeeder and check links.","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 5000ms\n  -   - waiting for locator(\"pre\")","statusTrace":"page = <Page url='https://georchestra-127-0-0-1.nip.io/import/05d768d0-ec11-4c85-9bab-2f1e82a32f84/publishok'>\n\n    @allure.feature(\"geOrchestra\")\n    @allure.story(\"Datafeeder\")\n    @allure.description(\"This test attempts to load a SHP file through datafeeder and check links.\")\n    @allure.title(\"Test the Datafeeder webapp and links\")\n    def test_import_shp_datafeeder(page: Page):\n        login(page)\n        page.goto(\"/import/\")\n        screenshot_page(page, \"datafeeder\")\n        page.locator(\"input#undefined\").first.set_input_files(os.path.abspath(\"./fixtures/antenne.zip\"))\n        page.get_by_role(\"checkbox\").check()\n        page.get_by_role(\"button\", name=\"Upload\").click()\n        page.get_by_role(\"button\", name=\"-\", exact=True).click()\n        page.get_by_role(\"button\", name=\"WGS84\").click()\n        page.get_by_role(\"button\", name=\"WGS84\").click()\n        page.get_by_role(\"button\", name=\"Lambert\").click()\n        page.get_by_role(\"button\", name=\"OK, my data are correct\").click()\n        page.locator(\"input[type=\\\"text\\\"]\").click()\n        page.locator(\"input[type=\\\"text\\\"]\").fill(\"Antennes\")\n        page.locator(\"textarea[name=\\\"textArea\\\"]\").click()\n        page.locator(\"textarea[name=\\\"textArea\\\"]\").fill(\"Awesome\")\n        page.get_by_role(\"button\", name=\"next\").click()\n        page.get_by_role(\"textbox\").fill(\"a\")\n        page.locator(\"#tags div\").nth(1).click()\n        page.get_by_role(\"button\", name=\"Addresses\").click()\n        page.get_by_role(\"button\", name=\"next\").click()\n        page.get_by_role(\"button\", name=\"next\").click()\n        page.get_by_role(\"textbox\").click()\n        page.get_by_role(\"textbox\").fill(\"This is the process\")\n        page.get_by_role(\"button\", name=\"next\").click()\n        page.get_by_role(\"button\", name=\"Submit\").click()\n        screenshot_page(page, \"after-submit-click\")\n        # wait for the data to be ingested\n        page.wait_for_timeout(30000)\n        screenshot_page(page, \"after-ingestion\")\n        expect(page.get_by_role(\"button\", name=\"Metadata record\")).to_be_visible(timeout=15000)\n        expect(page.get_by_role(\"button\", name=\"Map viewer\")).to_be_visible()\n        with page.expect_popup() as page1_info:\n            page.get_by_role(\"button\", name=\"Metadata record\").click()\n        page1 = page1_info.value\n        page.wait_for_timeout(10000)\n        screenshot_page(page1, \"metadata\")\n        expect(page1.get_by_text(\"Awesome\").first).to_be_visible()\n        expect(page1.get_by_text(\"Antennes - WMS\")).to_be_visible()\n        page1.close()\n        with page.expect_popup() as page2_info:\n            page.get_by_role(\"button\", name=\"Map viewer\").click()\n        page2 = page2_info.value\n        screenshot_page(page2, \"mapviewer\")\n        expect(page2.locator(\"canvas\")).to_be_visible()\n        page2.close()\n        with page.expect_popup() as page3_info:\n            page.get_by_role(\"button\", name=\"OGC API\").click()\n        page3 = page3_info.value\n        page3_url = page3_info.value.url\n        screenshot_page(page3, \"ogcapi\")\n>       expect(page3.locator(\"pre\")).to_be_visible()\nE       AssertionError: Locator expected to be visible\nE       Actual value: <element(s) not found> \nE       Call log:\nE         - LocatorAssertions.to_be_visible with timeout 5000ms\nE         -   - waiting for locator(\"pre\")\n\ntests/georchestra-base/test_ingest_data.py:61: AssertionError","steps":[],"attachments":[{"uid":"a0bf648e26ab041a","name":"datafeeder","source":"a0bf648e26ab041a.png","type":"image/png","size":259316},{"uid":"964759499730b399","name":"after-submit-click","source":"964759499730b399.png","type":"image/png","size":321623},{"uid":"451f9e0c3252c21d","name":"after-ingestion","source":"451f9e0c3252c21d.png","type":"image/png","size":77940},{"uid":"8ac2c35eb9950691","name":"metadata","source":"8ac2c35eb9950691.png","type":"image/png","size":443741},{"uid":"85c95e261f381273","name":"mapviewer","source":"85c95e261f381273.png","type":"image/png","size":4935},{"uid":"3c312a7c8ca6986a","name":"ogcapi","source":"3c312a7c8ca6986a.png","type":"image/png","size":4331}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":6,"hasContent":true},"afterStages":[{"name":"new_context::0","time":{"start":1738663222625,"stop":1738663223470,"duration":845},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_artifacts_recorder::0","time":{"start":1738663223470,"stop":1738663223491,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_pw_artifacts_folder::0","time":{"start":1738663223498,"stop":1738663223499,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser::0","time":{"start":1738663223499,"stop":1738663223696,"duration":197},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"playwright::0","time":{"start":1738663223699,"stop":1738663223715,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"story","value":"Datafeeder"},{"name":"feature","value":"geOrchestra"},{"name":"parentSuite","value":"tests.georchestra-base"},{"name":"suite","value":"test_ingest_data"},{"name":"host","value":"fv-az2035-872"},{"name":"thread","value":"16874-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.georchestra-base.test_ingest_data"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"69ff7c472faf744e","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 15000ms\n  -   - waiting for get_by_role(\"button\", name=\"Metadata record\")","time":{"start":1738663105742,"stop":1738663166281,"duration":60539}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":24,"broken":3,"skipped":0,"passed":23,"unknown":0,"total":50},"items":[{"uid":"bd452808276eed1d","reportUrl":"https://georchestra.github.io/e2e-tests/69//#testresult/bd452808276eed1d","status":"passed","time":{"start":1738662486819,"stop":1738662549941,"duration":63122}},{"uid":"e0e55955588cd498","reportUrl":"https://georchestra.github.io/e2e-tests/68//#testresult/e0e55955588cd498","status":"passed","time":{"start":1738556958454,"stop":1738557022637,"duration":64183}},{"uid":"9d1d0259aa01d2bd","reportUrl":"https://georchestra.github.io/e2e-tests/67//#testresult/9d1d0259aa01d2bd","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 5000ms\n  -   - waiting for get_by_text(\"Awesome\").first","time":{"start":1737952354213,"stop":1737952407957,"duration":53744}},{"uid":"7d9dd21763f4ee71","reportUrl":"https://georchestra.github.io/e2e-tests/66//#testresult/7d9dd21763f4ee71","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 5000ms\n  -   - waiting for locator(\"pre\")","time":{"start":1737624907492,"stop":1737624971064,"duration":63572}},{"uid":"880ce0fc9943ec44","reportUrl":"https://georchestra.github.io/e2e-tests/65//#testresult/880ce0fc9943ec44","status":"passed","time":{"start":1737605934444,"stop":1737605985299,"duration":50855}},{"uid":"a8f851f1cca8d6c8","reportUrl":"https://georchestra.github.io/e2e-tests/64//#testresult/a8f851f1cca8d6c8","status":"passed","time":{"start":1737519462926,"stop":1737519526423,"duration":63497}},{"uid":"c7f0b4b32b9e37d4","reportUrl":"https://georchestra.github.io/e2e-tests/63//#testresult/c7f0b4b32b9e37d4","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 5000ms\n  -   - waiting for get_by_text(\"Awesome\").first","time":{"start":1737433248629,"stop":1737433302071,"duration":53442}},{"uid":"d143c44ed6efbcec","reportUrl":"https://georchestra.github.io/e2e-tests/62//#testresult/d143c44ed6efbcec","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 5000ms\n  -   - waiting for locator(\"pre\")","time":{"start":1737346803347,"stop":1737346858265,"duration":54918}},{"uid":"22591a56133cfae1","reportUrl":"https://georchestra.github.io/e2e-tests/61//#testresult/22591a56133cfae1","status":"passed","time":{"start":1737260231589,"stop":1737260294718,"duration":63129}},{"uid":"e837719c545b0338","reportUrl":"https://georchestra.github.io/e2e-tests/60//#testresult/e837719c545b0338","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 5000ms\n  -   - waiting for get_by_text(\"Awesome\").first","time":{"start":1737173881687,"stop":1737173932966,"duration":51279}},{"uid":"8d0764c90213997a","reportUrl":"https://georchestra.github.io/e2e-tests/59//#testresult/8d0764c90213997a","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 15000ms\n  -   - waiting for get_by_role(\"button\", name=\"Metadata record\")","time":{"start":1737087534973,"stop":1737087589439,"duration":54466}},{"uid":"33d88a2451c5a9d6","reportUrl":"https://georchestra.github.io/e2e-tests/58//#testresult/33d88a2451c5a9d6","status":"passed","time":{"start":1737001119669,"stop":1737001173899,"duration":54230}},{"uid":"e1609303e2997487","reportUrl":"https://georchestra.github.io/e2e-tests/57//#testresult/e1609303e2997487","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 5000ms\n  -   - waiting for get_by_text(\"Awesome\").first","time":{"start":1736914720552,"stop":1736914776865,"duration":56313}},{"uid":"a67aeaa3017d3acf","reportUrl":"https://georchestra.github.io/e2e-tests/56//#testresult/a67aeaa3017d3acf","status":"passed","time":{"start":1736828388897,"stop":1736828448267,"duration":59370}},{"uid":"aa97d58ed6c9b513","reportUrl":"https://georchestra.github.io/e2e-tests/55//#testresult/aa97d58ed6c9b513","status":"passed","time":{"start":1736742052682,"stop":1736742102594,"duration":49912}},{"uid":"f930b424e9a4c816","reportUrl":"https://georchestra.github.io/e2e-tests/54//#testresult/f930b424e9a4c816","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 15000ms\n  -   - waiting for get_by_role(\"button\", name=\"Metadata record\")","time":{"start":1736655553506,"stop":1736655607135,"duration":53629}},{"uid":"72a9f2b1c32e0ca3","reportUrl":"https://georchestra.github.io/e2e-tests/53//#testresult/72a9f2b1c32e0ca3","status":"passed","time":{"start":1736569067934,"stop":1736569131089,"duration":63155}},{"uid":"f4e373b04b15149","reportUrl":"https://georchestra.github.io/e2e-tests/52//#testresult/f4e373b04b15149","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 15000ms\n  -   - waiting for get_by_role(\"button\", name=\"Metadata record\")","time":{"start":1736482742385,"stop":1736482794892,"duration":52507}},{"uid":"51b318a85bd686a0","reportUrl":"https://georchestra.github.io/e2e-tests/51//#testresult/51b318a85bd686a0","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - LocatorAssertions.to_be_visible with timeout 15000ms\n  -   - waiting for get_by_role(\"button\", name=\"Metadata record\")","time":{"start":1736396343124,"stop":1736396396638,"duration":53514}},{"uid":"1f5725fbafc1b2a5","reportUrl":"https://georchestra.github.io/e2e-tests/50//#testresult/1f5725fbafc1b2a5","status":"passed","time":{"start":1736309984457,"stop":1736310038771,"duration":54314}}]},"tags":[]},"source":"28ff4210853377b0.json","parameterValues":["'chromium'"]}